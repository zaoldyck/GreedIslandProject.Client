<mat-sidenav-container class="scroll-visible">
  <mat-sidenav-content class="scroll-visible">
    <div class="docs-component-sidenav-body-content">

      <div>
        <div class="docs-component-viewer-nav">

          <div class="docs-component-viewer-nav-content" [class.is-collapsed]="collapsed()">

            <mat-nav-list>

              <!-- 组：交流区主导航（来自 constants.lureCommunityNav） -->
              @for (item of constants.lureCommunityNav; track item.link) {
              <a mat-list-item
                 [routerLink]="item.link"
                 [queryParams]="item.queryParams"
                 routerLinkActive="is-active"
                 [routerLinkActiveOptions]="{ exact: item.exact ?? false }">
                <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
                <span matListItemTitle>{{ item.label }}</span>
              </a>
              }

              @if (currentMoreItem()) {
              <a mat-list-item
                 [routerLink]="currentMoreItem()!.link"
                 [queryParams]="currentMoreItem()!.queryParams"
                 routerLinkActive="is-active"
                 [routerLinkActiveOptions]="{ exact: currentMoreItem()!.exact ?? false }">
                <mat-icon matListItemIcon>{{ currentMoreItem()!.icon }}</mat-icon>
                <span matListItemTitle>{{ currentMoreItem()!.label }}</span>
              </a>
              }

              <!-- 侧栏“更多”入口：点击后弹出菜单（保留写死逻辑） -->
              <a mat-list-item [matMenuTriggerFor]="moreMenu">
                <mat-icon matListItemIcon>more_vert</mat-icon>
                <span matListItemTitle>更多</span>
              </a>

              <mat-menu #moreMenu="matMenu">
                @for (m of constants.lureCommunityMoreNav; track m.link) {
                <a mat-menu-item
                   [routerLink]="m.link"
                   [queryParams]="m.queryParams">
                  <mat-icon>{{ m.icon }}</mat-icon>
                  <span>{{ m.label }}</span>
                </a>
                }
              </mat-menu>
           
              @for (item of constants.lureCommunityQuickLinks; track item.link) {
              <a mat-list-item
                 [routerLink]="item.link"
                 [queryParams]="item.queryParams"
                 routerLinkActive="is-active"
                 [routerLinkActiveOptions]="{ exact: item.exact ?? false }">
                <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
                <span matListItemTitle>{{ item.label }}</span>
              </a>
              }
            </mat-nav-list>
          </div>
          <div class="resizable-area" [class.is-collapsed]="collapsed()">
            @if(collapsed())
            {
            <button matIconButton class="resizable-button" aria-label="展开" (click)="onExpand()">
              <mat-icon>left_panel_open</mat-icon>
            </button>
            }
            @else {
            <button matIconButton class="resizable-button" aria-label="收起" (click)="onCollapse()">
              <mat-icon>left_panel_close</mat-icon>
            </button>
            }
          </div>
        </div>
      </div>
      <div class="community-component-content">

        <router-outlet></router-outlet>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
