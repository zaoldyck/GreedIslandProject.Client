<mat-sidenav-container class="scroll-visible">
  <mat-sidenav-content class="scroll-visible">
    <div class="docs-component-sidenav-body-content">

      <div>
        <div class="docs-component-viewer-nav">

          <div class="docs-component-viewer-nav-content" [class.is-collapsed]="collapsed()">

            <mat-nav-list class="app-nav-list">

              <!-- 组：交流区主导航（来自 constants.lureCommunityNav） -->
              @for (item of constants.lureCommunityNav; track item.link) {
              <a mat-list-item #link="routerLinkActive" [activated]="link.isActive"
                 [routerLink]="item.link"
                 [queryParams]="item.queryParams"
                 routerLinkActive="is-active"
                 [routerLinkActiveOptions]="{ exact: item.exact ?? false }">
                <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
                <span matListItemTitle>{{ item.label }}</span>
              </a>
              }

              @if (currentMoreItem()) {
              <a mat-list-item #link="routerLinkActive" [activated]="link.isActive"
                 [routerLink]="currentMoreItem()!.link"
                 [queryParams]="currentMoreItem()!.queryParams"
                 routerLinkActive="is-active"
                 [routerLinkActiveOptions]="{ exact: currentMoreItem()!.exact ?? false }">
                <mat-icon matListItemIcon>{{ currentMoreItem()!.icon }}</mat-icon>
                <span matListItemTitle>{{ currentMoreItem()!.label }}</span>
              </a>
              }

              <!-- 侧栏“更多”入口：点击后弹出菜单（保留写死逻辑） -->
              <a mat-list-item [matMenuTriggerFor]="moreMenu">
                <mat-icon matListItemIcon>more_vert</mat-icon>
                <span matListItemTitle>更多</span>
              </a>

              <mat-menu #moreMenu="matMenu">
                @for (m of constants.lureCommunityMoreNav; track m.link) {
                <a mat-menu-item
                   [routerLink]="m.link"
                   [queryParams]="m.queryParams">
                  <mat-icon>{{ m.icon }}</mat-icon>
                  <span>{{ m.label }}</span>
                </a>
                }
              </mat-menu>
              <mat-divider class="menu-divider"></mat-divider>

              <!-- 快速链接折叠标题（默认展开） -->
              <a mat-list-item
                 class="quick-links-header"
                 (click)="toggleQuickLinks()"
                 aria-controls="quick-links-section"
                 [attr.aria-expanded]="!quickLinksCollapsed()">
                <mat-icon matListItemIcon class="icon-box">
                  {{ quickLinksCollapsed() ? 'chevron_right' : 'expand_more' }}
                </mat-icon>
                <span matListItemTitle>快速链接</span>
              </a>
              @if (!quickLinksCollapsed()) {
                @for (item of constants.lureCommunityQuickLinks; track item.link) {
                  <a mat-list-item #link="routerLinkActive" [activated]="link.isActive"
                 [routerLink]="item.link"
                 [queryParams]="item.queryParams"
                 routerLinkActive="is-active"
                 [routerLinkActiveOptions]="{ exact: item.exact ?? false }">
                <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
                <span matListItemTitle>{{ item.label }}</span>
              </a>
                }
              }
              <mat-divider class="menu-divider"></mat-divider>
 
              <a mat-list-item
                 class="quick-links-header"
                 (click)="toggleTags()"
                 aria-controls="tags-section"
                 [attr.aria-expanded]="!tagsCollapsed()">
                <mat-icon matListItemIcon class="icon-box">
                  {{ tagsCollapsed() ? 'chevron_right' : 'expand_more' }}
                </mat-icon>
                <span matListItemTitle>标签</span>
              </a>
              @if (!tagsCollapsed()) {
                @for (item of constants.lureCommunityTags; track item.link) {
                   <a mat-list-item #link="routerLinkActive" [activated]="link.isActive"
                 [routerLink]="item.link"
                 [queryParams]="item.queryParams"
                 routerLinkActive="is-active"
                 [routerLinkActiveOptions]="{ exact: item.exact ?? false }">
                <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
                <span matListItemTitle>{{ item.label }}</span>
              </a>
                }
              }
            </mat-nav-list>
          </div>
          <div class="resizable-area" [class.is-collapsed]="collapsed()">
            @if(collapsed())
            {
            <button matIconButton class="resizable-button" aria-label="展开" (click)="onExpand()">
              <mat-icon>left_panel_open</mat-icon>
            </button>
            }
            @else {
            <button matIconButton class="resizable-button" aria-label="收起" (click)="onCollapse()">
              <mat-icon>left_panel_close</mat-icon>
            </button>
            }
          </div>
        </div>
      </div>
      <div class="community-component-content">
        <app-breadcrumb></app-breadcrumb>
        <router-outlet></router-outlet>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
